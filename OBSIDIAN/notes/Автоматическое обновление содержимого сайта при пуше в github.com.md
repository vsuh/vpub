## –ó–∞–¥–∞—á–∞ 

–†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—á–Ω—ã–π —Å–∞–π—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –±–µ–∑ –≤—ã—Ö–æ–¥–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç. 
- –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É  http://192.168.–•.–•/index.html (http://hl)
- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–∞–π—Ç–∞ –ª–µ–∂–∏—Ç –≤ /var/www/html —Å–µ—Ä–≤–µ—Ä–∞ 192.168.–•.–•. 
- –í–µ–±—Å–µ—Ä–≤–µ—Ä - `nginx`
 
–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ–º–µ—â–∞—é—Ç—Å—è –≤ git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π https://github.com/USER/www 
 
–ù–µ–æ–±—Ö–æ–¥–∏–º–æ, —á—Ç–æ–±—ã –ø—Ä–∏ –ø—É—à–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞—Ç–∞–ª–æ–≥–∞ /var/www/html –æ–±–Ω–æ–≤–ª—è–ª–æ—Å—å

## –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è
–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ /var/www/html –ø—Ä–∏ –ø—É—à–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å post-receive hook –≤ bare-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. 

## –¶–µ–ª—å
–û–±–µ—Å–ø–µ—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ /var/www/html –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø—É—à–µ –≤ https://github.com/USER/www


## üîß –®–∞–≥–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ:

> –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π https://github.com/USER/www —É–∂–µ —Å–æ–∑–¥–∞–Ω (–¥–æ—Å—Ç—É–ø–µ–Ω)

1. üì• –°–∫–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ /opt/www-repo:
```bash
sudo mkdir -p /opt/www-repo
sudo chown -R $USER:$USER /opt/www-repo
git clone https://github.com/USER/www.git /opt/www-repo
```

2. üì§ –ù–∞—Å—Ç—Ä–æ–π bare-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è –ø—Ä–∏—ë–º–∞ –ø—É—à–µ–π:
```bash
sudo mkdir -p /opt/www-bare.git
cd /opt/www-bare.git
git init --bare
```

3. üß© –°–æ–∑–¥–∞–π post-receive hook:
```bash
sudo nano /opt/www-bare.git/hooks/post-receive
```

–í—Å—Ç–∞–≤—å —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```bash
#!/bin/bash
GIT_WORK_TREE=/var/www/html git checkout -f
```

–°–¥–µ–ª–∞–π —Ñ–∞–π–ª –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:

```bash
sudo chmod +x /opt/www-bare.git/hooks/post-receive
```

4. ‚õìÔ∏è –°–≤—è–∂–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ —Å —ç—Ç–∏–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º
–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã GitHub –ø—É—à–∏–ª –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –≤ –æ–±—ã—á–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –∞ –≤ –Ω–∞—à bare.
```bash
cd /opt/www-repo
git remote add live /opt/www-bare.git
```

–¢–µ–ø–µ—Ä—å, —á—Ç–æ–±—ã –≤—ã–ª–æ–∂–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è (–ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞):
```bash
git push live master
```
–ï—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ç–∫–∞ ‚Äî `main`, –∑–∞–º–µ–Ω–∏ `master` –Ω–∞ `main`.

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞
–ò–∑–º–µ–Ω–∏ –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å —Ñ–∞–π–ª –≤ /opt/www-repo, —Å–¥–µ–ª–∞–π –∫–æ–º–º–∏—Ç, –∏ –∑–∞—Ç–µ–º:
```bash
git push live main
```

–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `/var/www/html` –æ–±–Ω–æ–≤–∏–ª–æ—Å—å.

## –ü–µ—Ä–µ–Ω–æ—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ –¥—Ä—É–≥–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä

1. üì¶ –ö–ª–æ–Ω–∏—Ä—É–π GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash
git clone https://github.com/USER/www.git
cd www
```
–≠—Ç–æ —Ç–≤–æ—è —Ä–∞–±–æ—á–∞—è –∫–æ–ø–∏—è –ø—Ä–æ–µ–∫—Ç–∞.

2. ‚ûï –î–æ–±–∞–≤—å live-—É–¥–∞–ª—ë–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (—Ç–æ—Ç —Å–∞–º—ã–π bare-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —É —Ç–µ–±—è –µ—Å—Ç—å SSH-–¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É, –∏ –æ–Ω –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è hl.local (–∏–ª–∏ IP-–∞–¥—Ä–µ—Å, –Ω–∞–ø—Ä–∏–º–µ—Ä 192.168.2.2). –¢–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–π —Ç–∞–∫:
```bash
git remote add live ssh://USER@hl.local/opt/www-bare.git
```

–ó–∞–º–µ–Ω–∏ `USER` –Ω–∞ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –∏ hl.local –Ω–∞ IP –∏–ª–∏ hostname —Å–µ—Ä–≤–µ—Ä–∞.

–ü—Ä–∏–º–µ—Ä:
```bash
git remote add live ssh://valera@192.168.1.100/opt/www-bare.git
```

3. üß™ –ü—Ä–æ–≤–µ—Ä—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
```bash
git remote -v
```

–¢—ã –¥–æ–ª–∂–µ–Ω —É–≤–∏–¥–µ—Ç—å:
```
origin  https://github.com/USER/www.git (fetch)
origin  https://github.com/USER/www.git (push)
live    ssh://user@server/opt/www-bare.git (push)
```

4. üöÄ –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–∞–π—Ç–∞
–ü–æ—Å–ª–µ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```bash

git add .
git commit -m "–ò–∑–º–µ–Ω–µ–Ω–∏—è"
git push origin main       # —Å–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞ GitHub
git push live main         # –¥–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
```


### üîê –£–ø—Ä–æ—â–µ–Ω–∏–µ: –¥–æ—Å—Ç—É–ø –ø–æ SSH –±–µ–∑ –ø–∞—Ä–æ–ª—è
–ß—Ç–æ–±—ã –Ω–µ –≤–≤–æ–¥–∏—Ç—å –ø–∞—Ä–æ–ª—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø—É—à–µ:

–ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:

ssh-keygen -t ed25519 -C "your_email@example.com"
–°–∫–æ–ø–∏—Ä—É–π –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä:

ssh-copy-id user@server
–¢–µ–ø–µ—Ä—å git push live –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –ø–∞—Ä–æ–ª—è.

‚úÖ –ì–æ—Ç–æ–≤–æ!
==–¢–µ–ø–µ—Ä—å —Ç—ã –º–æ–∂–µ—à—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å —Å–∞–π—Ç –Ω–∞ –ª—é–±–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–∏–≤ live-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–∞–∫ –≤—Ç–æ—Ä–æ–π remote. –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Äî GitHub –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏, –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–∫–ª–∞–¥—ã–≤–∞–Ω–∏—è.==

> –•–æ—á–µ—à—å, —á—Ç–æ–±—ã git push origin —Å–∞–º —Ç—Ä–∏–≥–≥–µ—Ä–∏–ª –¥–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–±–µ–∑ –≤—Ç–æ—Ä–æ–≥–æ push live)? –¢–æ–≥–¥–∞ –º–æ–∂–µ–º –ø–µ—Ä–µ–π—Ç–∏ –∫ GitHub Actions + self-hosted runner.